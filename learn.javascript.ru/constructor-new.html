<!DOCTYPE html><html lang="ru"><head><script>window.currentUser = null;</script><script>window.rateUsdToNative = 65.69;</script><title itemprop="name">Создание объектов через &quot;new&quot;</title><link href="pack/styles.ce210dd933f17ce8be6f.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700%7COpen+Sans+Condensed:700&amp;subset=latin,latin-ext,cyrillic,cyrillic-ext" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://learn.javascript.ru/constructor-new"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="img/favicon/favicon.png"><meta itemprop="image" content="https://learn.javascript.ru/img/site_preview_ru_512x512.png"><meta property="og:title" content="Создание объектов через &quot;new&quot;"><meta property="og:image" content="https://learn.javascript.ru/img/site_preview_ru_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Создание объектов через &quot;new&quot;"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://learn.javascript.ru/img/site_preview_ru_512x512.png"><link rel="prev" href="object-conversion.html"><link rel="next" href="descriptors-getters-setters.html"><script>window.GA_ID = "UA-2056213-16";</script><script>window.GTM_ID = 'GTM-WD2DZPG'</script><script>window.YANDEX_METRIKA_ID = 17649010;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="https://www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="http://mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6Lf9NyETAAAAACZlg-a9Us2SxvYbeVC1ROWaWv4O";</script><script src="pack/init.ce210dd933f17ce8be6f.js"></script><script src="pack/head.ce210dd933f17ce8be6f.js" defer></script><meta property="og:title" content="Создание объектов через &quot;new&quot;"><meta property="og:type" content="article"><script src="pack/tutorial.ce210dd933f17ce8be6f.js" defer></script><script src="pack/footer.ce210dd933f17ce8be6f.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if lt IE 10]><div style="color:red;text-align:center">Извините, IE&lt;10 не поддерживается, пожалуйста используйте более новый браузер.</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><div class="sitetoolbar__content"><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="index.html"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="img/sitetoolbar__logo_ru.svg" width="171" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small" src="img/sitetoolbar__logo_small_ru.svg" width="80" alt="" role="presentation"/><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"><li class="sitetoolbar__section sitetoolbar__section_current"><a class="sitetoolbar__link" href="index.html">Учебник</a></li><li class="sitetoolbar__section"><a class="sitetoolbar__link" href="courses.1.html">Курсы</a></li><li class="sitetoolbar__section"><a class="sitetoolbar__link" href="https://javascript.ru/forum/">Форум</a></li><li class="sitetoolbar__section"><a class="sitetoolbar__link" href="https://es5.javascript.ru">ES5</a></li><li class="sitetoolbar__section"><a class="sitetoolbar__link" href="quiz.html">Тесты знаний</a></li><li class="sitetoolbar__section"><a class="sitetoolbar__link" href="jobs.1.html">Стажировки</a></li><li class="sitetoolbar__section sitetoolbar__section_dropdown"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>Скринкасты</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><ul class="sitetoolbar__dropdown-items"><li class="sitetoolbar__dropdown-item"><a class="sitetoolbar__secondary-link sitetoolbar__dropdown-link" href="nodejs-screencast.html">Node.js</a></li><li class="sitetoolbar__dropdown-item"><a class="sitetoolbar__secondary-link sitetoolbar__dropdown-link" href="screencast/webpack.html">Webpack</a></li><li class="sitetoolbar__dropdown-item"><a class="sitetoolbar__secondary-link sitetoolbar__dropdown-link" href="screencast/gulp.html">Gulp 4</a></li><li class="sitetoolbar__dropdown-item"><a class="sitetoolbar__secondary-link sitetoolbar__dropdown-link" href="screencast/react.html">React.js</a></li><li class="sitetoolbar__dropdown-item"><a class="sitetoolbar__secondary-link sitetoolbar__dropdown-link" href="screencast/angular.html">Angular</a></li><li class="sitetoolbar__dropdown-item"><a class="sitetoolbar__secondary-link sitetoolbar__dropdown-link" href="screencast/git.html">Git</a></li></ul></div></div></li></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="ebook.1.html"><span class="buy-book-button__extra-text">Купить</span>EPUB/PDF</a></div><div class="sitetoolbar__login-wrap"><button class="sitetoolbar__login sitetoolbar__login_unready" data-action-login></button></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><form class="sitetoolbar__search" method="GET" action="http://learn.javascript.ru/search"><button class="sitetoolbar__search-toggle" type="button"></button><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" autofocus="autofocus" name="query" placeholder="Искать на Javascript.ru" type="text"/></div><button class="sitetoolbar__find" type="submit">Найти</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="/" selected>Учебник</option><option value="/courses">Курсы</option><option value="https://javascript.ru/forum/">Форум</option><option value="https://es5.javascript.ru">ES5</option><option value="/quiz">Тесты знаний</option><option value="/jobs">Стажировки</option></select></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="http://learn.javascript.ru/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="Поиск в учебнике" required="required"/><button class="tablet-menu-search__button" type="submit" name="type" value="articles">Поиск</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Карта учебника</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">Поделиться</span><a class="share share_tw" href="https://twitter.com/share?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_gp" href="https://plus.google.com/share?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_vk" href="https://vkontakte.ru/share.php?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a></div></div></div></div><progress class="tutorial-progress" data-sticky value="50" max="86" data-tooltip="Урок 50 из 86"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");var pageWrapper=document.querySelector(".page-wrapper");pageWrapper&&pageWrapper.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")},0);</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-1"><a class="breadcrumbs__link" href="index.html" itemprop="url"><span class="breadcrumbs__hidden-text" itemprop="title">Учебник</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-2" itemprop="child"><a class="breadcrumbs__link" href="js.html" itemprop="url"><span itemprop="title">Язык JavaScript</span></a></li><li class="breadcrumbs__item" id="breadcrumb-2" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child"><a class="breadcrumbs__link" href="objects-more.html" itemprop="url"><span itemprop="title">Методы объектов и контекст вызова</span></a></li></ol><h1 class="main__header-title">Создание объектов через &quot;new&quot;</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Создание объектов через &quot;new&quot;"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>Обычный синтаксис <code>{...}</code> позволяет создать один объект. Но зачастую нужно создать много однотипных объектов.</p>
<p>Для этого используют «функции-конструкторы», запуская их при помощи специального оператора <code>new</code>.</p>
<h2><a class="main__anchor" name="konstruktor" href="constructor-new.html#konstruktor">Конструктор</a></h2><p>Конструктором становится любая функция, вызванная через <code>new</code>.</p>
<p>Например:</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:5,&quot;end&quot;:5}]">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function Animal(name) {
  this.name = name;
  this.canWalk = true;
}

var animal = new Animal(&quot;ёжик&quot;);</code></pre>
        </div>
      </div>
      
      </div><p>Заметим, что, технически, любая функция может быть использована как конструктор. То есть, любую функцию можно вызвать при помощи <code>new</code>. Как-то особым образом указывать, что она – конструктор – не надо.</p>
<p>Но, чтобы выделить функции, задуманные как конструкторы, их называют с большой буквы: <code>Animal</code>, а не <code>animal</code>.</p>
<p>Детальнее – функция, запущенная через <code>new</code>, делает следующее:</p>
<ol>
<li>Создаётся новый пустой объект.</li>
<li>Ключевое слово <code>this</code> получает ссылку на этот объект.</li>
<li>Функция выполняется. Как правило, она модифицирует <code>this</code> (т.е. этот новый объект), добавляет методы, свойства.</li>
<li>Возвращается <code>this</code>.</li>
</ol>
<p>В результате вызова <code>new Animal(&quot;ёжик&quot;);</code> получаем такой объект:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">animal = {
  name: &quot;ёжик&quot;,
  canWalk: true
}</code></pre>
        </div>
      </div>
      
      </div><p>Иными словами, при вызове <code>new Animal</code> происходит что-то в таком духе (первая и последняя строка – это то, что делает интерпретатор):</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:7,&quot;end&quot;:7},{&quot;start&quot;:1,&quot;end&quot;:1}]">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function Animal(name) {
  // this = {};

  // в this пишем свойства, методы
  this.name = name;
  this.canWalk = true;

  // return this;
}</code></pre>
        </div>
      </div>
      
      </div><p>Теперь многократными вызовами <code>new Animal</code> с разными параметрами мы можем создать столько объектов, сколько нужно. Поэтому такую функцию и называют <em>конструктором</em> – она предназначена для «конструирования» объектов.</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">new function() { … }</span></div>
            <div class="important__content"><p>Иногда функцию-конструктор объявляют и тут же используют, вот так:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var animal = new function() {
  this.name = &quot;Васька&quot;;
  this.canWalk = true;
};</code></pre>
        </div>
      </div>
      
      </div><p>Так делают, когда хотят создать единственный объект данного типа. Пример выше с тем же успехом можно было бы переписать как:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var animal = {
  name: &quot;Васька&quot;,
  canWalk: true
}</code></pre>
        </div>
      </div>
      
      </div><p>…Но обычный синтаксис <code>{...}</code> не подходит, когда при создании свойств объекта нужны более сложные вычисления. Их можно проделать в функции-конструкторе и записать результат в <code>this</code>.</p>
</div></div>
<h2><a class="main__anchor" name="pravila-obrabotki-return" href="constructor-new.html#pravila-obrabotki-return">Правила обработки return</a></h2><p>Как правило, конструкторы ничего не возвращают. Их задача – записать всё, что нужно, в <code>this</code>, который автоматически станет результатом.</p>
<p>Но если явный вызов <code>return</code> всё же есть, то применяется простое правило:</p>
<ul>
<li>При вызове <code>return</code> с объектом, будет возвращён он, а не <code>this</code>.</li>
<li>При вызове <code>return</code> с примитивным значением, оно будет отброшено.</li>
</ul>
<p>Иными словами, вызов <code>return</code> с объектом вернёт объект, а с чем угодно, кроме объекта – возвратит, как обычно, <code>this</code>.</p>
<p>Например, возврат объекта:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function BigAnimal() {

  this.name = &quot;Мышь&quot;;

  return { name: &quot;Годзилла&quot; };  // &lt;-- возвратим объект
}

alert( new BigAnimal().name );  // Годзилла, получили объект вместо this</code></pre>
        </div>
      </div>
      
      </div><p>А вот пример с возвратом строки:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function BigAnimal() {

  this.name = &quot;Мышь&quot;;

  return &quot;Годзилла&quot;; // &lt;-- возвратим примитив
}

alert( new BigAnimal().name ); // Мышь, получили this (а Годзилла пропал)</code></pre>
        </div>
      </div>
      
      </div><p>Эта особенность работы <code>new</code> прописана в стандарте, но используется она весьма редко.</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">Можно без скобок</span></div>
            <div class="important__content"><p>Кстати, при вызове <code>new</code> без аргументов скобки можно не ставить:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var animal = new BigAnimal; // &lt;-- без скобок
// то же самое что
var animal = new BigAnimal();</code></pre>
        </div>
      </div>
      
      </div><p>Не сказать, что выбрасывание скобок – «хороший стиль», но такой синтаксис допустим стандартом.</p>
</div></div>
<h2><a class="main__anchor" name="sozdanie-metodov-v-konstruktore" href="constructor-new.html#sozdanie-metodov-v-konstruktore">Создание методов в конструкторе</a></h2><p>Использование функций для создания объекта дает большую гибкость. Можно передавать конструктору параметры,  определяющие как его создавать, и он будет «клепать» объекты заданным образом.</p>
<p>Добавим в создаваемый объект ещё и метод.</p>
<p>Например, <code>new User(name)</code> создает объект с заданным значением свойства <code>name</code> и методом <code>sayHi</code>:</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:8,&quot;end&quot;:10}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function User(name) {
  this.name = name;

  this.sayHi = function() {
    alert( &quot;Моё имя: &quot; + this.name );
  };
}

var ivan = new User(&quot;Иван&quot;);

ivan.sayHi(); // Моё имя: Иван

/*
ivan = {
   name: &quot;Иван&quot;,
   sayHi: функция
}
*/</code></pre>
        </div>
      </div>
      
      </div><h2><a class="main__anchor" name="lokalnye-peremennye" href="constructor-new.html#lokalnye-peremennye">Локальные переменные</a></h2><p>В функции-конструкторе бывает удобно объявить вспомогательные локальные переменные и вложенные функции, которые будут видны только внутри:</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:1,&quot;end&quot;:7}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function User(firstName, lastName) {
  // вспомогательная переменная
  var phrase = &quot;Привет&quot;;

  //  вспомогательная вложенная функция
  function getFullName() {
      return firstName + &quot; &quot; + lastName;
    }

  this.sayHi = function() {
    alert( phrase + &quot;, &quot; + getFullName() ); // использование
  };
}

var vasya = new User(&quot;Вася&quot;, &quot;Петров&quot;);
vasya.sayHi(); // Привет, Вася Петров</code></pre>
        </div>
      </div>
      
      </div><p>Мы уже говорили об этом подходе ранее, в главе <a href="closures-usage.html">Локальные переменные для объекта</a>.</p>
<p>Те функции и данные, которые должны быть доступны для внешнего кода, мы пишем в <code>this</code> – и к ним можно будет обращаться, как например <code>vasya.sayHi()</code>, а вспомогательные, которые нужны только внутри самого объекта, сохраняем в локальной области видимости.</p>
<h2><a class="main__anchor" name="itogo" href="constructor-new.html#itogo">Итого</a></h2><p>Объекты могут быть созданы при помощи функций-конструкторов:</p>
<ul>
<li>Любая функция может быть вызвана с <code>new</code>, при этом она получает новый пустой объект в качестве <code>this</code>, в который она добавляет свойства. Если функция не решит возвратить свой объект, то её результатом будет <code>this</code>.</li>
<li>Функции, которые предназначены для создания объектов, называются <em>конструкторами</em>. Их названия пишут с большой буквы, чтобы отличать от обычных.</li>
</ul>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="constructor-new.html#tasks">Задачи</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="constructor-new.html#dve-funktsii-odin-obekt" name="dve-funktsii-odin-obekt">Две функции один объект</a></h3><a class="task__open-link" href="task/two-functions-one-object.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 2</span></div><div class="task__content"><p>Возможны ли такие функции <code>A</code> и <code>B</code> в примере ниже, что соответствующие объекты <code>a,b</code> равны (см. код ниже)?</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function A() { ... }
function B() { ... }

var a = new A;
var b = new B;

alert( a == b ); // true</code></pre>
        </div>
      </div>
      
      </div><p>Если да – приведите пример кода с такими функциями.</p>
<button class="task__solution" type="button">решение</button><div class="task__answer"><div class="task__answer-content"><p>Да, возможны.</p>
<p>Они должны возвращать одинаковый объект. При этом если функция возвращает объект, то <code>this</code> не используется.</p>
<p>Например, они могут вернуть один и тот же объект <code>obj</code>, определённый снаружи:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var obj = {};

function A() { return obj; }
function B() { return obj; }

var a = new A;
var b = new B;

alert( a == b ); // true</code></pre>
        </div>
      </div>
      
      </div></div><button class="close-button task__answer-close" type="button" title="закрыть"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="constructor-new.html#sozdat-calculator-pri-pomoschi-konstruktora" name="sozdat-calculator-pri-pomoschi-konstruktora">Создать Calculator при помощи конструктора</a></h3><a class="task__open-link" href="task/calculator-constructor.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 5</span></div><div class="task__content"><p>Напишите <em>функцию-конструктор</em> <code>Calculator</code>, которая создает объект с тремя методами:</p>
<ul>
<li>Метод <code>read()</code> запрашивает два значения при помощи <code>prompt</code> и запоминает их в свойствах объекта.</li>
<li>Метод <code>sum()</code> возвращает сумму запомненных свойств.</li>
<li>Метод <code>mul()</code> возвращает произведение запомненных свойств.</li>
</ul>
<p>Пример использования:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var calculator = new Calculator();
calculator.read();

alert( &quot;Сумма=&quot; + calculator.sum() );
alert( &quot;Произведение=&quot; + calculator.mul() );</code></pre>
        </div>
      </div>
      
      </div><a href="constructor-new.html#" onclick="event.preventDefault(); runDemo(this)">Запустить демо</a><p><a href="http://plnkr.co/edit/zhj76OJ94fOFKLwpTAfF?p=preview" target="_blank" data-plunk-id="zhj76OJ94fOFKLwpTAfF">Открыть песочницу с тестами для задачи.</a></p><button class="task__solution" type="button">решение</button><div class="task__answer"><div class="task__answer-content"><div data-trusted="1" class="code-example" data-demo="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function Calculator() {

  this.read = function() {
    this.a = +prompt('a?', 0);
    this.b = +prompt('b?', 0);
  };

  this.sum = function() {
    return this.a + this.b;
  };

  this.mul = function() {
    return this.a * this.b;
  };
}

var calculator = new Calculator();
calculator.read();

alert( &quot;Сумма=&quot; + calculator.sum() );
alert( &quot;Произведение=&quot; + calculator.mul() );</code></pre>
        </div>
      </div>
      
      </div><p><a href="http://plnkr.co/edit/ii7wAaeDgNfXV0Itl9Eh?p=preview" target="_blank" data-plunk-id="ii7wAaeDgNfXV0Itl9Eh">Открыть решение с тестами в песочнице.</a></p></div><button class="close-button task__answer-close" type="button" title="закрыть"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="constructor-new.html#sozdat-accumulator-pri-pomoschi-konstruktora" name="sozdat-accumulator-pri-pomoschi-konstruktora">Создать Accumulator при помощи конструктора</a></h3><a class="task__open-link" href="task/accumulator.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 5</span></div><div class="task__content"><p>Напишите <em>функцию-конструктор</em> <code>Accumulator(startingValue)</code>.
Объекты, которые она создает, должны хранить текущую сумму и прибавлять к ней то, что вводит посетитель.</p>
<p>Более формально, объект должен:</p>
<ul>
<li>Хранить текущее значение в своём свойстве <code>value</code>. Начальное значение свойства <code>value</code> ставится конструктором равным <code>startingValue</code>.</li>
<li>Метод <code>read()</code> вызывает <code>prompt</code>, принимает число и прибавляет его к свойству <code>value</code>.</li>
</ul>
<p>Таким образом, свойство <code>value</code> является текущей суммой всего, что ввел посетитель при вызовах метода <code>read()</code>, с учетом начального значения <code>startingValue</code>.</p>
<p>Ниже вы можете посмотреть работу кода:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var accumulator = new Accumulator(1); // начальное значение 1
accumulator.read(); // прибавит ввод prompt к текущему значению
accumulator.read(); // прибавит ввод prompt к текущему значению
alert( accumulator.value ); // выведет текущее значение</code></pre>
        </div>
      </div>
      
      </div><a href="constructor-new.html#" onclick="event.preventDefault(); runDemo(this)">Запустить демо</a><p><a href="http://plnkr.co/edit/sU79jO02divjVrckiIdK?p=preview" target="_blank" data-plunk-id="sU79jO02divjVrckiIdK">Открыть песочницу с тестами для задачи.</a></p><button class="task__solution" type="button">решение</button><div class="task__answer"><div class="task__answer-content"><div data-trusted="1" class="code-example" data-demo="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function Accumulator(startingValue) {
  this.value = startingValue;

  this.read = function() {
    this.value += +prompt('Сколько добавлять будем?', 0);
  };

}

var accumulator = new Accumulator(1);
accumulator.read();
accumulator.read();
alert( accumulator.value );</code></pre>
        </div>
      </div>
      
      </div><p><a href="http://plnkr.co/edit/H9URWNIRnlWFTSxRg9vb?p=preview" target="_blank" data-plunk-id="H9URWNIRnlWFTSxRg9vb">Открыть решение с тестами в песочнице.</a></p></div><button class="close-button task__answer-close" type="button" title="закрыть"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="constructor-new.html#sozdayte-kalkulyator" name="sozdayte-kalkulyator">Создайте калькулятор</a></h3><a class="task__open-link" href="task/calculator-extendable.html" target="_blank"></a></div><div class="task__header-note"><span class="task__importance" title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 5</span></div><div class="task__content"><p>Напишите конструктор <code>Calculator</code>, который создаёт расширяемые объекты-калькуляторы.</p>
<p>Эта задача состоит из двух частей, которые можно решать одна за другой.</p>
<ol>
<li>
<p>Первый шаг задачи: вызов <code>calculate(str)</code> принимает строку, например «1 + 2», с жёстко заданным форматом «ЧИСЛО операция ЧИСЛО» (по одному пробелу вокруг операции), и возвращает результат. Понимает плюс <code>+</code> и минус <code>-</code>.</p>
<p>Пример использования:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var calc = new Calculator;

alert( calc.calculate(&quot;3 + 7&quot;) ); // 10</code></pre>
        </div>
      </div>
      
      </div></li>
<li>
<p>Второй шаг – добавить калькулятору метод <code>addMethod(name, func)</code>, который учит калькулятор новой операции. Он получает имя операции <code>name</code> и функцию от двух аргументов <code>func(a,b)</code>, которая должна её реализовывать.</p>
<p>Например, добавим операции умножить <code>*</code>, поделить <code>/</code> и возвести в степень <code>**</code>:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">var powerCalc = new Calculator;
powerCalc.addMethod(&quot;*&quot;, function(a, b) {
  return a * b;
});
powerCalc.addMethod(&quot;/&quot;, function(a, b) {
  return a / b;
});
powerCalc.addMethod(&quot;**&quot;, function(a, b) {
  return Math.pow(a, b);
});

var result = powerCalc.calculate(&quot;2 ** 3&quot;);
alert( result ); // 8</code></pre>
        </div>
      </div>
      
      </div></li>
</ol>
<ul>
<li>Поддержка скобок и сложных математических выражений в этой задаче не требуется.</li>
<li>Числа и операции могут состоять из нескольких символов. Между ними ровно один пробел.</li>
<li>Предусмотрите обработку ошибок. Какая она должна быть – решите сами.</li>
</ul>
<p><a href="http://plnkr.co/edit/BZ81AsjaXM3cA2lWEBmJ?p=preview" target="_blank" data-plunk-id="BZ81AsjaXM3cA2lWEBmJ">Открыть песочницу с тестами для задачи.</a></p><button class="task__solution" type="button">решение</button><div class="task__answer"><div class="task__answer-content"><div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="выполнить" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="constructor-new.html#" title="открыть в песочнице" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function Calculator() {

  var methods = {
    &quot;-&quot;: function(a, b) {
      return a - b;
    },
    &quot;+&quot;: function(a, b) {
      return a + b;
    }
  };

  this.calculate = function(str) {

    var split = str.split(' '),
      a = +split[0],
      op = split[1],
      b = +split[2]

    if (!methods[op] || isNaN(a) || isNaN(b)) {
      return NaN;
    }

    return methods[op](a, b);
  }

  this.addMethod = function(name, func) {
    methods[name] = func;
  };
}

var calc = new Calculator;

calc.addMethod(&quot;*&quot;, function(a, b) {
  return a * b;
});
calc.addMethod(&quot;/&quot;, function(a, b) {
  return a / b;
});
calc.addMethod(&quot;**&quot;, function(a, b) {
  return Math.pow(a, b);
});

var result = calc.calculate(&quot;2 ** 3&quot;);
alert( result ); // 8</code></pre>
        </div>
      </div>
      
      </div><ul>
<li>Обратите внимание на хранение методов. Они просто добавляются к внутреннему объекту.</li>
<li>Все проверки и преобразование к числу производятся в методе <code>calculate</code>. В дальнейшем он может быть расширен для поддержки более сложных выражений.</li>
</ul>
<p><a href="http://plnkr.co/edit/bw2eQJizRTkGjQPf0gND?p=preview" target="_blank" data-plunk-id="bw2eQJizRTkGjQPf0gND">Открыть решение с тестами в песочнице.</a></p></div><button class="close-button task__answer-close" type="button" title="закрыть"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="object-conversion.html" data-tooltip="Преобразование объектов: toString и valueOf"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Предыдущий урок</span></a><a class="page__nav page__nav_next" href="descriptors-getters-setters.html" data-tooltip="Дескрипторы, геттеры и сеттеры свойств"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Следующий урок</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">Поделиться</span><a class="share share_tw" href="https://twitter.com/share?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_gp" href="https://plus.google.com/share?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_vk" href="https://vkontakte.ru/share.php?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a></div><div class="article-tablet-foot__map"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Карта учебника</span></a></div></div></div><div class="banner-bottom"><div class="banner-bottom__text">Проводим <a href="courses.1.html">курсы по Javascript и фреймворкам</a>.</div><button class="banner-bottom__close" data-banner-close="Courses" data-banner-close-message="Эта информация больше не будет выводиться." title="не показывать"></button></div><script>"hideBannerCourses"in localStorage||(document.querySelector(".banner-bottom").style.display="flex");</script><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="constructor-new.html#comments" name="comments">Комментарии</a></h2><div class="comments__read-before"><span class="comments__read-before-link">перед тем как писать…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>Приветствуются комментарии, содержащие дополнения и вопросы по статье, и ответы на них.</li><li>Для одной строки кода используйте тег <code>&lt;code&gt;</code>, для нескольких строк кода&nbsp;&mdash; тег <code>&lt;pre&gt;</code>, если больше 10 строк&nbsp;&mdash; ссылку на песочницу (<a href='http://plnkr.co/edit/?p=preview'>plnkr</a>, <a href='http://jsbin.com'>JSBin</a>, <a href='http://codepen.io'>codepen</a>…)</li><li>Если что-то непонятно в статье&nbsp;&mdash; пишите, что именно и с какого места.</li></ul></div></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/learn.javascript.ru\/constructor-new","identifier":"\/constructor-new"}); };</script><script>var disqus_shortname = "learnjavascriptru";</script><script>var disqus_enabled = true;</script></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="tutorial/map.html" data-action="tutorial-map" data-tooltip="Карта учебника"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">Раздел</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="objects-more.html">Методы объектов и контекст вызова</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">Навигация по уроку</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="constructor-new.html#konstruktor">Конструктор</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="constructor-new.html#pravila-obrabotki-return">Правила обработки return</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="constructor-new.html#sozdanie-metodov-v-konstruktore">Создание методов в конструкторе</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="constructor-new.html#lokalnye-peremennye">Локальные переменные</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="constructor-new.html#itogo">Итого</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="constructor-new.html#tasks">Задачи (4)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="constructor-new.html#comments">Комментарии</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">Поделиться</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_gp sidebar__share" href="https://plus.google.com/share?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a><a class="share share_vk sidebar__share" href="https://vkontakte.ru/share.php?url=http%3A%2F%2Flearn.javascript.ru%2Fconstructor-new"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/iliakan/javascript-tutorial-ru/blob/master/1-js/6-objects-more/3-constructor-new/article.md">Редактировать на Github</a></div></div></div></div></div></div><div class="page-footer"><div class="page-footer__left"><ul class="page-footer__list"><li class="page-footer__item">©&nbsp;2007—2018&nbsp; Илья Кантор</li><li class="page-footer__item"><a class="page-footer__link" href="about.html#contact-us">связаться с нами</a></li><li class="page-footer__item"><a class="page-footer__link" href="terms.html">пользовательское соглашение</a></li><li class="page-footer__item"><a class="page-footer__link" href="privacy.html">политика конфиденциальности</a></li><li class="page-footer__item"><a class="page-footer__slack" href="http://slack.javascript.ru">slack-чат</a></li><li class="page-footer__item"><a class="page-footer__link" href="about.html">о проекте</a></li></ul></div><div class="page-footer__right"><ul class="page-footer__list"><li><a class="page-footer__link" rel="nofollow" href="http://github.com/iliakan/javascript-tutorial-ru">open source</a></li></ul></div></div></body></html>